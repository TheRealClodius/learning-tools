{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Conversation Memory Retrieve Output",
  "description": "Results from a memory retrieval query, including conversation details, execution data, and relevance scores.",
  "type": "object",
  "properties": {
    "status": {
      "type": "string",
      "description": "Operation status (success/error)"
    },
    "query": {
      "type": "string",
      "description": "Original search query"
    },
    "results": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "message_id": {
            "type": "string",
            "description": "Unique identifier for the memory entry"
          },
          "timestamp": {
            "type": "string",
            "description": "ISO timestamp of the memory entry"
          },
          "user_input": {
            "type": "string",
            "description": "User's input text"
          },
          "agent_response": {
            "type": "string",
            "description": "Agent's response text"
          },
          "meta_data": {
            "type": "object",
            "description": "Additional metadata about the memory entry"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Tags associated with this memory entry"
          },
          "execution": {
            "type": "object",
            "properties": {
              "tools_used": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "List of tools used during execution"
              },
              "errors": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "error_type": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                },
                "description": "List of errors encountered during execution"
              },
              "duration_ms": {
                "type": "integer",
                "description": "Execution duration in milliseconds"
              },
              "success": {
                "type": "boolean",
                "description": "Whether the execution was successful"
              }
            }
          },
          "relevance_score": {
            "type": "number",
            "description": "Relevance score for this memory entry"
          }
        },
        "required": [
          "message_id",
          "timestamp",
          "user_input",
          "agent_response",
          "meta_data",
          "tags"
        ]
      }
    }
  },
  "required": [
    "status",
    "query",
    "results"
  ]
}